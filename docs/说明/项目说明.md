# 校园失物招领系统 - 项目说明

## 📋 目录

1. [快速开始](#快速开始)
2. [项目结构](#项目结构)
3. [核心模块说明](#核心模块说明)
4. [使用说明](#使用说明)
5. [常见问题](#常见问题)

---

## 🚀 快速开始

### 1. 安装依赖
```powershell
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

### 2. 启动服务器
```powershell
python -m app.main
```

### 3. 访问系统
打开浏览器：`http://localhost:5000`

---

## 📁 项目结构

```
softProject/
├── app/                    # 应用代码（核心）
│   ├── agent/             # 🤖 智能体模块
│   │   ├── matcher.py     # 匹配引擎（5条规则）
│   │   ├── rule_agent.py # 规则型智能体
│   │   └── notification_agent.py  # 通知智能体
│   │
│   ├── database/          # 💾 数据库模块
│   │   ├── db.py         # 数据库连接
│   │   ├── db_manager.py # 数据库操作
│   │   └── models_db.py  # 数据库表模型
│   │
│   ├── auth/              # 🔐 认证模块
│   │   ├── auth_service.py      # 认证服务
│   │   └── session_manager.py   # 会话管理
│   │
│   ├── web/               # 🌐 Web界面模块
│   │   ├── routes.py      # Web路由
│   │   ├── templates/     # HTML模板
│   │   └── static/        # 静态文件
│   │
│   ├── main.py           # Flask主程序
│   └── models.py         # 业务模型
│
├── scripts/               # 📜 运行脚本
│   ├── run_demo.py        # 命令行测试
│   ├── run_server_demo.py # Web服务测试
│   ├── test_db_init.py    # 数据库测试
│   └── 查看数据库.py      # 查看数据库
│
├── docs/                  # 📚 文档
│   ├── 计划/             # 项目计划
│   ├── 报告/             # 项目报告
│   ├── 说明/             # 使用说明（本文件）
│   └── 作业文档/         # 作业报告
│
├── database.db           # SQLite数据库
└── requirements.txt       # Python依赖
```

---

## 🔧 核心模块说明

### 1. 智能体模块（app/agent/）

**作用：** 实现规则型智能体，自动匹配失物和招领，并发送通知

**核心文件：**
- `matcher.py` - 匹配引擎
  - 规则1：类别匹配（40分）
  - 规则2：地点相似度（25分）
  - 规则3：时间匹配度（20分）
  - 规则4：特征相似度（15分）
  - 规则5：综合评分

- `rule_agent.py` - 规则型智能体核心
  - 感知：读取失物/招领数据
  - 决策：应用5条匹配规则
  - 执行：生成匹配结果

- `notification_agent.py` - 通知智能体
  - 匹配成功通知（高匹配度≥80分发送紧急通知）
  - 未解决提醒（超过7天/14天）
  - 系统公告
  - 通知管理（标记已读、查询未读数量）

### 2. 数据库模块（app/database/）

**作用：** 数据库操作和表结构定义

**核心文件：**
- `db.py` - 数据库连接配置
- `db_manager.py` - 数据库操作（增删改查）
- `models_db.py` - 数据库表模型（4个表）

**数据表：**
- `users` - 用户表
- `lost_items` - 失物表
- `found_items` - 招领表
- `match_records` - 匹配记录表
- `notifications` - 通知表

### 3. 认证模块（app/auth/）

**作用：** 用户注册、登录、会话管理

**核心文件：**
- `auth_service.py` - 认证服务（注册、登录、密码加密）
- `session_manager.py` - 会话管理

### 4. Web界面模块（app/web/）

**作用：** Web界面和路由

**核心文件：**
- `routes.py` - Web路由（12个页面）
- `templates/` - HTML模板（12个页面）
- `static/` - CSS/JS静态文件

**页面列表：**
1. `index.html` - 首页（失物/招领列表，支持搜索、筛选、排序）
2. `login.html` - 登录页
3. `register.html` - 注册页
4. `post_lost.html` - 发布失物
5. `post_found.html` - 发布招领
6. `matches.html` - 匹配结果页
7. `lost_detail.html` - 失物详情页
8. `found_detail.html` - 招领详情页
9. `notifications.html` - 通知中心
10. `profile.html` - 用户主页
11. `about.html` - 关于我们
12. `base.html` - 基础模板

---

## 📖 使用说明

### 基本功能

1. **用户注册/登录**
   - 访问 `/register` 注册账号
   - 访问 `/login` 登录

2. **发布失物**
   - 登录后访问 `/post_lost`
   - 填写失物信息
   - 提交后自动触发智能体匹配

3. **发布招领**
   - 登录后访问 `/post_found`
   - 填写招领信息

4. **查看匹配结果**
   - 在首页点击"查看匹配结果"
   - 查看智能体匹配的招领信息
   - 按匹配度排序显示

5. **通知中心**
   - 登录后访问 `/notifications`
   - 查看匹配通知、提醒通知、系统公告
   - 标记通知为已读
   - 查看未读通知数量

6. **用户主页**
   - 登录后访问 `/profile`
   - 查看自己发布的所有失物/招领
   - 查看解决统计信息

### 运行脚本

**命令行测试：**
```powershell
python scripts\run_demo.py
```

**Web服务测试：**
```powershell
python scripts\run_server_demo.py
```

**查看数据库：**
```powershell
python scripts\查看数据库.py
```

### 局域网访问

1. 确保服务器配置了 `host='0.0.0.0'`
2. 查看本机IP：`ipconfig`
3. 其他设备访问：`http://你的IP:5000`

详细说明见：[局域网访问说明.md](局域网访问说明.md)

---

## ❓ 常见问题

### Q: 数据库报错怎么办？
A: 删除 `database.db` 文件，重新运行程序会自动创建

### Q: 手机访问不了？
A: 检查：
1. 手机和电脑是否同一WiFi
2. Windows防火墙是否允许5000端口
3. 服务器是否配置了 `host='0.0.0.0'`

详细排查见：[手机访问问题排查.md](手机访问问题排查.md)

### Q: 如何查看数据库内容？
A: 运行 `python scripts\查看数据库.py`

详细说明见：[数据库查看说明.md](数据库查看说明.md)

### Q: 如何部署？
A: 可以使用Docker一键部署

详细说明见：[Docker部署说明.md](Docker部署说明.md)

---

## 📚 更多文档

- **项目计划**：`docs/计划/`
- **项目报告**：`docs/报告/`
- **作业文档**：`docs/作业文档/`
- **其他说明**：`docs/说明/`（本文件夹）

---

## 🎯 核心功能

✅ 用户注册/登录/登出  
✅ 发布失物/招领信息  
✅ 智能体自动匹配（5条规则）  
✅ 查看匹配结果（按匹配度排序）  
✅ 通知系统（匹配通知、提醒、公告）  
✅ 完整的Web界面（12个页面）  
✅ 数据库持久化（5个数据表）  
✅ RESTful API接口（支持客户端共享数据）  
✅ 搜索和筛选功能  
✅ 用户主页和统计信息  

---

**项目已可用，开始使用吧！** 🎉

